# Lib.Auth [![Quality Gate Status](https://sonarcloud.io/api/project_badges/measure?project=BrightMLS_Lib.Auth&metric=alert_status&token=847c67d65e20d33315a205998642a9689550bcab)](https://sonarcloud.io/summary/new_code?id=BrightMLS_Lib.Auth)

NPM library used for managing Authentication, Authorization common functionalities
Wiki documentation: TBD

## Installation

Installation is done using the
[`npm install` command](https://docs.npmjs.com/getting-started/installing-npm-packages-locally):

```bash
$ npm install @brightmls/auth
```

## Introduction

This library provides common functionality used for managing Authentication, Authorization and related functions.

See below for details on specific functionality.

## Functionality

### SAML

This library provides a simple interface for SAML Service Providers.

**SamlServiceProvider**
This is the main class and can validate and parse an IDP Login Response and extract the attributes.

### Example Use Case

```typescript
// set up our configuration
const idpConfig = makeIdpConfig(idpMetadata)
const spConfig = makeSPConfig(spMetadata)

// create an instance
const saml = new SamlServiceProvider(idpConfig, spConfig)

// parse the IDP Login Response
const SAMLResponse = res.context
const attributes = await saml.parseResponse({ body: { SAMLResponse } })
```

Note: the underlying library is _samlify_, for more details see the [homepage and github](https://samlify.js.org/)

## Code Pipeline Guidance

Follow points mentioned below to run pipeline in this repo (terraform version 1.1.3):

1. cd terraformPipeline
2. terraform init
3. terraform plan -out="plan.tfplan" -var-file=c1.tfvars
4. terraform apply "plan.tfplan"
